angular.module("Jeviteca").controller("AlbumCtrl", ["$scope", "Albums", "$filter", "$location", function($scope, Albums, $filter, $location){
    $scope.query = {};
    $scope.queryBy = '$';
    $scope.order={
        by:'title',
        sort:false
    };
    $scope.albums = $filter("orderBy")(Albums.data, $scope.order.by);
    $scope.setData=function(){
      alert();
      var packets = ["disconnect", "connect", "heartbeat", "message", "json", "event", "ack", "error", "noop"];
      var data='35b1748964afb6f6ab00803a07bb4e4487b4143255a26acf1ae8550d3b81b3e8abb6d32de3ffe5ba3a3abf4d0338b10b0bab55bbdac0e2aeecbf3b8740e724a704d30bc7365cec3cec719f0d959972de3885c56264858279eb9531ed99f59478913bb3138503bc303c0d0906fd21fd3a79db9257c9e75b8a56b9b1d69cb2cbac859d3eab0f457b4d8e89f24cd2a1ea989921688c94390f7a89f26514069bb82cd90a4d9dde38cf9a251277f617d63577ee6b2e854420b45946a6e12ccd879e1fa021d2ebd62d209e0795c035c0d6b665af552aed5ea2c20c74d338df1f0f1fb55ba22428d83cad28697dbb81fba100804478eb48052a975448f138fb190197e355297cfcc9210498c95e7afd3fbbc33b1268f6d5109fc1af3cc157260968c673b43eb7ff2673b1dd1ee77729b60e74ecb281e1b21f6de6ee96085cb6be6b62ba7c390b2c34b13e7f40769a91b6992dafad1382c9d1d17c4d6f047eed06f55b30ec16df9aec7c3be9c5bbd8e0e849f813f1d67915d1a7423a6bb072e8fd3abce824023e1f97e8bf942e58e009e806f591aae0ba06f49ebccff93ae734ec92c9fd74e2e716b2b1c83a04e072d548749cae763721687c5742802562ea8c34ec03a8ff8507c5d1dd772e94837e531e383111703809c60ce50c7580508015f393f230d5abbcdc4e8576d14813f1ad49300d4a30f6a08bfce5040102ab1ea3a5f9ddde660e6ac09c614a48cfae673d6e8111624157a84b1019a3932d98deb8a6bbbf9f202ab1b83a6a56e70b6262de49f699fb89a7ae775d76c86adfeda1a829b4fc1442d274ba4b96b242cf1a35ca17e0737fe97c1f9c902674db53c705a662b5230d3e25e8e66648cf3ddfa47bbc337c61b455b713e75984a03a6b66ae02df38d8addd1017738bc95e3aa7a1fd89cd8db3ee2134181ac9497c43c192a2299257d66b71e2817abcf4cf1a68bb17259a45ffecd79ac68572d98a69333aff042cd3c6bea3c95fd3744283b1e4895d53ab8a67443e3c6b0714a85d3789f2ba48a638645bb1966310bfb37ae09507cd67d2388bbabbac1bbb2a7802a4e094363aaeee6299a0a3f2548e10dc2bfc8920b377ffdd190181b66a10aee7299f0407a0502a85f2382e4810657cd57e6dcea44a378161774eddc657afd5556d5637734ae066bccd8548d86290f61901cfa33a89d887d7a6e97ce29c2e957c57536df6e0b8a804fbb579d510ab50561e3b0623564dafb27ebacd56e7df86f19105c35078cbf9fb0b1fb48e24f292d1858323fd8f14ed28cab37ea7f6ec09b69d34cf836f165c12505d699bf20f6b1e59eb4bbb90fb2a11b68051c144eacf8504a20ba7ee749cb4397704715f4dbe9be2611183c7e6723ea8b166025d342d0a0c973a6236cafca6451e56297ade9c158e965b2a90aa3508d1e2a7217aaa6b3e1fd6d9130bb30538873b11e84574e4b5f44de904a0957650ba07d8482610c38a9807bf89575281ffdef2c1af1c5cc9cf12f6eaec65300abaa8c1a5cb8379a73ce64164c9a8bf12ec544fad49953b48f694265b6285975047aa0ea73d2d5f85f743638053b32e48d3cc94b4ebdb9e4431042234f5352fa610d60b7cdde6879f285082e16443caa613a36b167baebf46eec5e890de752ea83839d6ed2a6a75ff82a7cb898daf69d93d9e85629e6bdbde1d0540da834e02bab82ea88e8e94b711a204a0a6103851b04e238011034a9ade957c205f64d377ba4e66ee319513da67124eb4711ace33d93b163ec190667632b08a046b8906407753fbac6810680dc3744b13bb214eeaa2b26a3e711246a62e62bcd28bc0e7676917b3333ce3e25982cdd4bbc0fd44a5d80a37e65439c0850f6940042a01d6b32085b43ea438a8d66bd378167713477e1fec49b564ecb263ff8550183e3da0dda6e9af7cc2a0dd8d8554600d049141e208afe8cb68097e04489bd555255598a8c804d3d13bbf01f13b9872dcd77fcb69caab5604dea009442262725f5791ae3502b6d28bbce0f9716a3245c2c316a0ff0f0fab40ba5372dd61582ec5bb37d2667974b4d78184a2c011659abccd22c7a0a3fb3fde06ec5574ae9bc1d4bb11d64ab7d39c3e002c9a2124e29cabc1f029e80fd63e3387e7d3458db86a0407bbc919a738f5f13810acc0619257cac7d65610af1e367ef18cc0b310ca33d991f2f1596dbb656ea06ea101852d9374898d55bc06644f9a7140928e5ce62fe64f912457e6e20bda8a98da956f7c54dc7cadb8b501db50807ed2a4f62e130e52077a851872d3cb3463353e2168c275faa83a4766c3ff18ec3c7f10b0bccf1a4868210ead56b33eee7471ee01cff9048891c26685fb267f7c2a2614f7ed85481de2251aeb92b39cd3956dd2e2a8f760ea95bf56ef824db5bcb169105d5d31c4149ca0ff699db573563b3fefa5bcd304dd0c14dea508ff45d76ed1f5bba462596062046e6757c4f5eefd6f2c10edb147effd07266f113afdd36d721520a36ebaf0770272f5ca97eef70997cb85c86bbb47ec153238d26956644a382c0d2da08b3cd3157b887232d564968c950a03aa04178874da95a6b1f47625c0f249743c5ea764bbfbfb17017b3840a53af143b2b1b249117cafd77bcd921e73c3053e1177156011873e76a8eebc0de315a174eb07cdd983a698c3e6f9eea044ee8ce784e9397eaf4de4c6dd20c2b8e25741a7620430f44f5deb85b4335799b4494801c27ecfde9d740dfb1091a2637b00ff20a0e674541295b844baee40baba52ae7c532dd2192d48104272fb890da4d8b3e0d5c3239406f59112ec6537adb5c74921dcfcd4e95eb3975d6daf55839263477101b4bbf2c5c5e678d1f9a6b1afb89547a363456e558cf55bb1b4a1903e837c3b9b41af6548d8fb1017350e6687357f1322470b3fc50738e9cb69c1290f423892af559f04dd40e12f8d35a089dbbff65273427b9586d28342fba2ec98b16dbc3989a8a00bb4e732a8c965d633c5d13b15017c1ad1ddf721482d9c49f53aba10dc48cc1615455b33b6d687ec6106010c7642896415eceeb73d66a8bab87166b53b8fd389d94d4489fb40832e0a62c0afcc0447633276b6ed8cf5db1e310fca71d842cf05a5221430cab305a0bb553961d0a3ae0426346f5d090e66afe803745eb0eb47a272757cb7247af1ba10b37848a00aab20665a23e1d1cf899d73e96bc4ad08d89948cb98fbdd87b7ed2f8e0948cc91ac4b74bbfbc7de49bb39d5a603831f72f948d83283e36e3cc0fdc9a634ff10dc804d33a76262fb95b00187aa4210aeaf339f95a06b6c453ad1ff0f4b8a51445940188389e7682c72a8d285c81f39cfe73c3afce8404478d3c1832ddd073bc937a6a78936bc56e1f6851f977f385f028c1d4e15ecaaa43a81c73f1f8bbe9b7e78c05ce06a51173b248ac1a05b4e1d8dbbd16e148cb3de082e95af3eb8dc07b204f14e2903993d89e5de4b5fb6818eed3ec80538baaf10770efbd137f75ea11e5a04e77af4cd26df02f67c791df3933a6f3442718a2842f7b6ae80a569348a57dd2c768ccb59b5a8fb4633173015d93a3c37a2658977ca87109cb8363b062d6e60bb362ae41e3ea14956f58e0d8554868b4eba383a405bc0304ac871b2e2492c1901cf05dc18658c2a7cf1684ec99c4de84ebe04dd387f045e99ec650d15ed51fc89d19995a15013a042321aa140f25ea0060ffb5704087a5dab528dbf3ad51001edade219ec6fd2db3bc1b27296a15948cfda1114dab13e10599e46d92119ade5a0cc61c548c06b2d79accc214008d48939d667e76daf3c9bf63d99fd097510409e9a894e366732c781b43cc1ad1f9e7b2489f2c5184e2f55c92ec19c5f7312a785953df4449b7f66aaaa21130ba60b716537850e3a23e4db6f81d231a64115bc981a89d88cfa2f421365f595364eec910ab79aab778b3b7ca8ecc11aeabf0a4e8ac36fea8ce3825640ffd69da0e316d795bb4097660e74b4b6afefa8f149e601ca433ac56e2a91fcad793173d117ef6d07bbb5af67b7da4d8a9b6b0710871f9c39c1882a3967afd733b1f9eb1192983d0407894b19c738f50ed26666a649330048e73cc1337f9fee11ee0a7e9c3852336b91d148356de9ef18d9144801a0a393d189be3ea248edad9a6aa75bebfab884e64fc82457b8e20b97567b34ae24bb13ff3c9779e647e98c0d7bc2800d73c60e08077e3a657233cb26a7750b2140797558a8072a1f17fc6eecb2f1a633bc43059505fb216b9a7a3ee6040807dd3bc285e112cab4ef568c1b90aab2123e64854843e225814a92a59c5595c006e2a84160cd95f6b06e0f4d33bce29a105d5d311665a5171391b87273c0a52d13f5df5162417f8f62a02099db2e6eeda8ca3d6259a7620402fc573cf5eefd566a10ed9647effd2c624a553ab5d3c1a11520a36e98feae65c9f5af20eeba403ea5b326f2629b7bd2b46d3a8937ed4a8c40404fa08bdad3151127720cd564967c950a039904178874039538b10176efe2f249743c9034742dfbfb91017b10a0dba2e23b3dc1be0c64fd3a09a66d5b1eff40deb21177926011e08a76f5ee3d16254f2da05907cdd9837f9877e6deeedd44ee06d78489e27ed64de4c6dd209dc2b8ecb2e8d12d535e8583b601d65290cd30b2d773a8871224e3b3d9d78581a21602d5ffa0f25e619040d8cc2c2272bcc6f1b211479d129c2c2648f156ea39e33dd3fb8940d869b3c1c8ac23ed98a86d4494303264957c61637a4d31923ad6af73e254e8119c7b89f2d7280677fb640dc19ce6047c11d1a2b73aba042caa7341dff1d8129c2e957ca3d725af349dc8fc48b8e04d7ad13b342483dd89004f756662fff9726b592bdd45c5a62de79c79f5a8a11068479dc16d5f695d6af5db24ccb87c31a14bba845d0dc104de0d535ba7a3d1ba8c10377debbb9f08a038dd36f4524a9a10a49c5e2004dd3a1c67cd6445ba4810957cc8b256ce8d1e343b6140ba5766a285a0e41134cfde0a4c18c99ea0486b5790f680f443536889a09fd70e9cf196af2e049d42b76dea87596295fb13fdd510e650c1fdf9060ffd4dafb2bca637108c553e2d4f0d64450f1eeb42d939b4aac0f292ed851441a68f02d128a5af9663beec63991360cf14d29db1e350a5369bf2356b72fcfc4b2d45fb2a113c80009dffad3b133ab7d73175ac7979f52f0471b44dbeefe2a17a04c755c93ef5664e0b9a347490dbdd3a85ea53d37f4512e23ebfa27947bfd8204a515d48e66a95a0f29ea080d0ec0342e27e401772e7d6ded797069451f13b2a047e64060de496bc79f72fbca6f9e965bb17c04576a9c6f13b971594372fa8857b76d7a685bc73161473e2ba7ea4edb80330d5b57662d8727e7579019e3143533ae740ecae384bd187b355e8e2d53a04e097d5f164afcd7607386838ae696902a719c93aa203859d626204943440fcd0005ff9e338bc76f8d72c3373e586491950808df343ed56d529ec687262e5d148137cad380bae3530f6078b5ed395f40229062dafdedd2d99a642e2a57396ee1dc841bfef8187a7416b4016a619de32909dde2da6fb697a202a96ba855beee70b622cde576aaafb89a7c377080b0736dfed79f52a20fc2557127482dfb10a91cfa349ca17e08af1e948c1a53a59a3b6904b6821fb3251f4ed695e8004c98d786ec101f9ee95aab6d26340e7cb09a0048e6fb4312ddee70e37d638e2e709a1b83279a840e2bc99a7fb74c0a507c57ca2f62496e272a80b14b25618beec48ca2c3a851224b2f5aab14742105babc9c839a0dd0e4fd698d8060776667fcb3e004e1df469b29c94d93b8719b43838abbc4df99568f1a8ba77a230c0530378ef7eded1851dd6e4852d381313212229d42cbee2f453682ce6f54840f97441ff10407d8abb24a5c7b83780014fb19a106a4d7a2404dd2c1c2a2c740e38c9a68348d5d7c0f00dee3a1ae3077c6b1385afd539d30beac6676d96313a8572eaa833f6a4f443533abb3a9f307fe9486daf2e9548a4d66dea8a59a895fbffa6d51055ef56c944ee0f565dafb25f21404ed6df86fdea6134ef339e05fb9f1fc07b9fd192ed851441fdce25d1c4b3b3b82cbeec09ab1360cf14e39d5ce3505d809bf24b171ecb79222d90fb2a11fc6a5196e7eacfd89531b16938f2a5b4c277043f4ee7beefe2a17a83c73ec9b2a8b166669a348ca0868c3a85a453fc7f451ee2553da4f1f20b69ec66cab6cbe60bddeac47b96bc83076d071e77f17cb5a8761030b2f11033bc4d8b40bb77fcb179d1bcb2531095a62639b1f01547173b75d9f1260a629c423e78aa3affb67a96e0cda0bcd3005e3eedab3a2e0492b616f50ed6a6e29c2e04b5cdb7c0bfc19ef583fbe6f12c10e6004e994dee0fc1caafe8317fa0d2524b324e9153db25038e05fb0b5f0a6bf151303648a8b749394e858ba59cfda7f6ec63b1ff60e76e2290fa295052e402f235a0769075222d38fb2a780380edc1088d1da004b49e633874a5b439a7ac957cc73c009c2af6516305a0dda5e69a36d3742d5ee5741914897fd7ae45f2f5899262ba86f262626691500fa662bb349616a2cfde4b65e9854fb362b557a0694e478bc2a8cdaf3b2032ffecd7ed7e4f67a764fff26947a30548d8382a043cc0d9575baf6b3c24923ac67cacf6ab2a2f2e85f67e177b5bb6635107e77c45afa0a37973629535015da5e6d8bc4766660ba0409287bf4305d3b518b869a674ecb2eac6cd0283d3c862090e8bd6f199a0ddae6282846b833423c108a5b28e68db5f04eeef4216505506f55bc5d374b3f948e29cc649539e54371af5991704e7a009814840d2ec08efbc55614338d368ffcd3e2412ad9663ec29482da54f139e0664ed91cfde0cd7371a3b9cb2763c033fb2c01a7bb49be0bbd137fad1ca2135a6f5d6baa88e7e9ffe918348a865fbbaeed51011e2e26d0b3a40ea30f672a89805a45660c1f9396b097f4fca7f2c65c6c2ecb2093262e68bb19c6f17c617cbfdffc1f9e41f6a86d122b9f672773b66b58285733762e869dc5796f46dd7d82977b7496bc0cc9aa6468a14d740644f762e54ea55a3035b2fa0d0d9f0ade7f1fc91910b303a068be6c948d1080ed7807ae49fde0311f19a8931c0b5bb42ee45aa6f0ed495a6b40d0035999d62490ba0d7d645b219e2a0d9772a85c58db6ef304d0aa2ecc284bb069a06a18518a1222d1085186ba637e4433e158507fd2d4475a83a4b1068f1cf3a0450c2db2a2d59ec4704fb73c94210b4d36de2563a099a6f5bd2a8bade6a30576d1a3e8537a62dd67f85c5c16d8522a707041af6816949b1667f495feff1cf3c5f7e7f244811c98cab1a660e546273c3623c5bdc57d2017bc6cd296908cb858e240716683c95d36b64ad98c95c0f23afed02fa5ae395c15f349124ad9e8ed7974b3247bb790d0bd280ac7a777a2d0324f1848931c045899a5672aa2a211362ebd2a5f6bc30978b1395404e9c26d9de3c19ba72cdf104427630e23bed5e0f24bb74b5fbc217bac7b8dd538bbba63adb017c53cb57957ca1c7cc10a80f0ed1854186850425da57e6a84e96194f3a06c66cb86e2021f504ab5d03427f13cd8ad25dc03b67a457afb2e81764d65d022fa6e2bfd54183a23c8a52b8c6ecc23990dea00dbb1f3b8e7e7bcb1e4e77341011c17ee066856260eb6a72f1dd35a668cb60e9b480673e683b9f0be6de10d9bae31046d2848902dae49937814b34f10938cda2cd23c33cd9d783619918d3b5e0a854e5cbf9ffa8a8ff91b1319ddf63bc483b896ce0c1e86607a3e0c0e7ad2e0f48d151d8cfa30a4540533bafb2da03294fc77ccf007adad7c9a89c00a87ce37a0108cf4083252ac886adfda273f25b50966089569c0b52aba53e836b42664048a32cc060c1d6558562f14fd67f3704e2968522a785838b9252c8613966200e3c0048cf7ee23e7f317c11eeff7e9ca6b30a17c8f29d612449006e3a14ff3a7a17a5eb85c0ccea38687a83d76b64b7c976fa0f23afed024e5a2295ee3034c88a4f13ffd782480a4789760d7b6f800dbae6bad6427acd95ba33f1342f7566aa66e30e7d04a6b4a4502a664862820b07133b7206480334dc06cc48cd954f0740534b85d0518556af7e6ebf79aadd254194854ecfc025f997bfa59cd36ec0ff13bcab63326239e06d7e40dd8c40159949a80f6cae96ca1ae7e31472a3a5a313f55451629da68885a02a66368e6e51f5891562f7a78504250f913cf5ee66562f4ec2c24111564e3bef679c14063ac618899195dde8fd6b8974621abca5403ea5b36bf26265e6b0116ddbbb07ed4a382c3aada03bda16153988990cd5641e7c7479a3a118905875df35489d1038b582be770d0af28b22bfcba79510d263a0dba2e2813dc13f3c94cc3a26fd6d5b1e73c3533e1191922b11e03e06f5eebcdb6f36311fb00d2ead47c48595e316304aaf3ce477c8101f15634102a27320b3c2b8ecb2150aa891ae5f192a6d72f51799b449c901c2a21d539d740dfb2191a22c2a94e2db4d12ebffefa7bb0767f65d441377cbd39cc661cce874de89d8c8b13aca13a8988aed53bee9f26e14760337adb5c7ba21dccb84895eb3975d11af5500f6f65698a09da6461ee489e2806fd73acac0b27ead560bfcc0bbf218188cf63979c61faf29337e153a04d5015d000e668735a61322489d71c50785c9bb23b3b030daeeec7f5463bc98818966e03698b96fbe73e7366c6a4dea2724bebe1ad34e6633e6df55945d392f1f856260a2d6f97c6da598de74fa0862a0ae52aa7fb1b1e20b748ca7f2c103a6098936bc8770bfa0aa30f1e6abef7943e215ec2a5737f9a771c0f93f00ee29b0f0a2d55140f9b4d356a05776933d8974956e98d68b4f3895afd3cbac2cb204f1e22903991589862d99ec3c3b29513c26de38baaf385720fb64f59e73cb1e50049c11f4cd6241505bf179936c5357e360f6a4e0fa37cc3cae805246693e57dd2caa8ccb5938a8fb36b5693c9aa085d309bc6589778176109c49bf1a472d6e2185c56d50727a0e459e648115f47c8b2d3a46bb7f20da72ec49a6c585564d3828aed1408f49f06666f670ba57ac94b07ae9d35612d87919a69d060dcc96408297bb7a526bd783c8969085cb15622243de57a0af3b12abf18c563b7540f1ddb5a8d6d57eb0fc2cffb6b4b1ec6bddece850ba3264116b32c5c899baf57560f4f15377d862f4c18a9585ec55740d9be22ce97a9f2a890966f813f1afe8bc7fcdb1b7f786eebf1e77250316cafb563213ddf1ede0367ca8a5ba2ea1578b5291d0e137b38ba4fa76090da3aad93168cc74508c457549fb7978da16032a783c80516d4d3dcfa065ec4a6338f29cb4329aacc57c2c33004d2a159415de26dde798902d9157cb97d88e95db6d398b9a109e5d05a204a7a69e177fc79da02d8bca2185bff44ee7ff3a1479ba778e10f50f9ded6222d36204142a0d0cf51e1f22426bf253c29818f710796b8ef494d907100164ad6dc35f4a97683bc1d18a6912abe21a01c0fc7281e0e681ecb940e687ac07fc797c1d7bc3e2010112b373db6d448d9bb3315ec5eac25a2dd6d762371ac92d7ccf7b444751c9f591563106ddbbcbdd53792dee1db73036029ef504fb13ba6a103fe81f91b26262a69f290435031bcc05d2e45bd983ad7b0017fa4ae57d75ca78465bd91852b8efc358faab';
      var regexp = /([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;
      var pieces = data.match(regexp);

           if (!pieces) return {};
           var id = pieces[2] || "",
               data = pieces[5] || "",
               packet = {
                   type: packets[pieces[1]],
                   endpoint: pieces[4] || ""
               };
           if (id) {
               packet.id = id;
               if (pieces[3]) packet.ack = "data";
               else packet.ack = true
           }
           switch (packet.type) {
               case "error":
                   var pieces = data.split("+");
                   packet.reason = reasons[pieces[0]] || "";
                   packet.advice = advice[pieces[1]] || "";
                   break;
               case "message":
                   packet.data = data || "";
                   break;
               case "event":
                   try {
                       var opts = JSON.parse(data);
                       packet.name = opts.name;
                       packet.args = opts.args
                   } catch (e) {}
                   packet.args = packet.args || [];
                   break;
               case "json":
                   try {
                       packet.data = JSON.parse(data)
                   } catch (e) {}
                   break;
               case "connect":
                   packet.qs = data || "";
                   break;
               case "ack":
                   var pieces = data.match(/^([0-9]+)(\+)?(.*)/);
                   if (pieces) {
                       packet.ackId = pieces[1];
                       packet.args = [];
                       if (pieces[3]) {
                           try {
                               packet.args = pieces[3] ? JSON.parse(pieces[3]) : []
                           } catch (e) {}
                       }
                   }
                   break;
               case "disconnect":
               case "heartbeat":
                   break
           }
           console.log(packet);
    }
}]);
